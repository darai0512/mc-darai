<!DOCTYPE html>
<html>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Cipher</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<button id="btn">音声認識開始</button>
<div id="content"></div>
    
<script type="text/javascript">
var btn = document.getElementById('btn');
var content = document.getElementById('content');

var speech = new webkitSpeechRecognition();
speech.lang = "ja";

var flag = false;
btn.addEventListener('click' , function() {
  flag = !flag;
  if (flag) {;
    content.textContent = 'start';
    speech.start();
  } else {
    content.textContent = 'stop';
    speech.stop();
  }
});
speech.addEventListener('result' , function(e) {
  var text = e.results[0][0].transcript;

  content.textContent = text || 'nothing';
});
</script>
